{"ast":null,"code":"var _jsxFileName = \"E:\\\\MyCase\\\\Dev\\\\Node\\\\2021\\\\react-fetch-progress-master\\\\src\\\\App.js\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport Path from 'path';\n\nfunction App() {\n  const [percentage, setPercentage] = useState(0);\n  const [progress, setProgress] = useState(null);\n\n  const download = () => {\n    const documentStyles = document.documentElement.style;\n    let progress = 0;\n    const path = Path.resolve(__dirname, 'video', 'test.mp4');\n    const writer = Fs.createWriteStream(path);\n    setProgress('in-progress');\n    axios({\n      url: 'https://pdrlimage.blob.core.windows.net/user-56e2f883-31a3-491e-a2db-fe988a1892b1/DroneStreams/f3c24ce3-5c4d-4c5e-bb50-330bddbe6e0a/gzx0w9j7.mp4?st=2021-02-18T20%3A38%3A01Z&se=2021-02-25T20%3A38%3A01Z&sp=rdl&sv=2018-03-28&sr=c&sig=keUdCAJnimfcURN2u0RRZ7C3lIJ8etdi3kimkKuFLZM%3D',\n\n      onDownloadProgress(progressEvent) {\n        progress = Math.round(progressEvent.loaded / progressEvent.total * 100);\n        setPercentage(progress);\n        documentStyles.setProperty('--progress', `${progress}%`);\n      }\n\n    }).then(response => {\n      setProgress('finished');\n      response.data.pipe(writer);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `progress-button ${progress}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"loading-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }\n  }, \"Loading\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"download-button\",\n    onClick: download,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"button-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 21\n    }\n  }, progress === 'finished' ? 'ðŸŽ‰ Done' : 'Download')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"percentage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }, percentage, \"%\"));\n}\n\nexport default App;","map":{"version":3,"sources":["E:/MyCase/Dev/Node/2021/react-fetch-progress-master/src/App.js"],"names":["React","useState","axios","Path","App","percentage","setPercentage","progress","setProgress","download","documentStyles","document","documentElement","style","path","resolve","__dirname","writer","Fs","createWriteStream","url","onDownloadProgress","progressEvent","Math","round","loaded","total","setProperty","then","response","data","pipe"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,WAAP;AACA,OAAOC,IAAP,MAAkB,MAAlB;;AAEA,SAASC,GAAT,GAAe;AACX,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BL,QAAQ,CAAC,CAAD,CAA5C;AACA,QAAM,CAACM,QAAD,EAAaC,WAAb,IAA4BP,QAAQ,CAAC,IAAD,CAA1C;;AAEA,QAAMQ,QAAQ,GAAG,MAAM;AACnB,UAAMC,cAAc,GAAGC,QAAQ,CAACC,eAAT,CAAyBC,KAAhD;AACA,QAAIN,QAAQ,GAAG,CAAf;AAEA,UAAMO,IAAI,GAAGX,IAAI,CAACY,OAAL,CAAaC,SAAb,EAAwB,OAAxB,EAAiC,UAAjC,CAAb;AACA,UAAMC,MAAM,GAAGC,EAAE,CAACC,iBAAH,CAAqBL,IAArB,CAAf;AAEAN,IAAAA,WAAW,CAAC,aAAD,CAAX;AAEAN,IAAAA,KAAK,CAAC;AACFkB,MAAAA,GAAG,EAAE,uRADH;;AAEFC,MAAAA,kBAAkB,CAACC,aAAD,EAAgB;AAC9Bf,QAAAA,QAAQ,GAAGgB,IAAI,CAACC,KAAL,CAAYF,aAAa,CAACG,MAAd,GAAuBH,aAAa,CAACI,KAAtC,GAA+C,GAA1D,CAAX;AAEApB,QAAAA,aAAa,CAACC,QAAD,CAAb;AAEAG,QAAAA,cAAc,CAACiB,WAAf,CAA2B,YAA3B,EAA0C,GAAEpB,QAAS,GAArD;AACH;;AARC,KAAD,CAAL,CASGqB,IATH,CASQC,QAAQ,IAAI;AAChBrB,MAAAA,WAAW,CAAC,UAAD,CAAX;AACAqB,MAAAA,QAAQ,CAACC,IAAT,CAAcC,IAAd,CAAmBd,MAAnB;AACH,KAZD;AAaH,GAtBD;;AAwBA,sBACI;AAAK,IAAA,SAAS,EAAG,mBAAkBV,QAAS,EAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAM,IAAA,SAAS,EAAC,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,eAEQ;AAAQ,IAAA,SAAS,EAAC,iBAAlB;AAAoC,IAAA,OAAO,EAAEE,QAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAM,IAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA+BF,QAAQ,KAAK,UAAb,GAA0B,SAA1B,GAAsC,UAArE,CADJ,CAFR,eAKI;AAAM,IAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA8BF,UAA9B,MALJ,CADJ;AASH;;AAED,eAAeD,GAAf","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport Path  from 'path';  \n\nfunction App() {\n    const [percentage, setPercentage] = useState(0);\n    const [progress,   setProgress] = useState(null);\n\n    const download = () => {\n        const documentStyles = document.documentElement.style;\n        let progress = 0;\n\n        const path = Path.resolve(__dirname, 'video', 'test.mp4')\n        const writer = Fs.createWriteStream(path)\n\n        setProgress('in-progress');\n    \n        axios({\n            url: 'https://pdrlimage.blob.core.windows.net/user-56e2f883-31a3-491e-a2db-fe988a1892b1/DroneStreams/f3c24ce3-5c4d-4c5e-bb50-330bddbe6e0a/gzx0w9j7.mp4?st=2021-02-18T20%3A38%3A01Z&se=2021-02-25T20%3A38%3A01Z&sp=rdl&sv=2018-03-28&sr=c&sig=keUdCAJnimfcURN2u0RRZ7C3lIJ8etdi3kimkKuFLZM%3D',\n            onDownloadProgress(progressEvent) {\n                progress = Math.round((progressEvent.loaded / progressEvent.total) * 100);\n\n                setPercentage(progress);\n\n                documentStyles.setProperty('--progress', `${progress}%`);\n            }\n        }).then(response => {\n            setProgress('finished');\n            response.data.pipe(writer);\n        });\n    };\n\n    return (\n        <div className={`progress-button ${progress}`}>\n            <span className=\"loading-text\">Loading</span>\n                <button className=\"download-button\" onClick={download}>\n                    <span className=\"button-text\">{progress === 'finished' ? 'ðŸŽ‰ Done' : 'Download'}</span>\n                </button>\n            <span className=\"percentage\">{percentage}%</span>\n        </div>\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}